<div class="container">

    <div class="main">

        <!-- TOP BAR -->
        <div class="top-bar">

            <h2 class="page-title">Production Dashboard</h2>

            <div class="filters">

                <div class="date-field top-label">
                    <label>From Date</label>
                    <input type="date" [(ngModel)]="fromDate" (change)="applyFilters()" />
                </div>

                <div class="date-field top-label">
                    <label>To Date</label>
                    <input type="date" [(ngModel)]="toDate" (change)="applyFilters()" />
                </div>

                <button class="clear-btn" (click)="clear()">Clear</button>

            </div>

        </div>


        <!-- TABLE -->
        <div class="table-wrapper">
            <table class="table custom-table">

                <thead>
                    <tr>
                        <th>Batch</th>

                        <th>Production</th>
                        <th>↓</th>

                        <th>Casting</th>
                        <th>↓</th>

                        <th>Cutting</th>
                        <th>↓</th>

                        <th>Autoclave</th>
                        <th>↓</th>

                        <th>Block</th>
                        <th>↓</th>

                        <th>Cube Test</th>
                        <th>↓</th>

                        <th>Rejection</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let row of paginatedRows">

                        <!-- BATCH -->
                        <td>{{ row.batchNo }}</td>

                        <!-- PRODUCTION -->
                        <td>
                            {{ row.productionTime ? (row.productionTime | date:'hh:mm a') : '-' }}
                        </td>

                        <!-- PROD → CAST DIFF -->
                        <td class="diff">
                            {{ row.prodToCastingDiff ? formatMinutes(row.prodToCastingDiff) : '-' }}
                        </td>

                        <!-- CASTING -->
                        <td>
                            {{ row.castingTime ? (row.castingTime | date:'hh:mm a') : '-' }}
                        </td>

                        <!-- CAST → CUT DIFF -->
                        <td class="diff">
                            {{ row.castingToCuttingDiff ? formatMinutes(row.castingToCuttingDiff) : '-' }}
                        </td>

                        <!-- CUTTING -->
                        <td>
                            {{ row.cuttingTime ? (row.cuttingTime | date:'hh:mm a') : '-' }}
                        </td>

                        <!-- CUT → AUTO DIFF -->
                        <td class="diff">
                            {{ row.cuttingToAutoclaveDiff ? formatMinutes(row.cuttingToAutoclaveDiff) : '-' }}
                        </td>

                        <!-- AUTOCLAVE -->
                        <td>
                            {{ row.autoclaveTime ? (row.autoclaveTime | date:'hh:mm a') : '-' }}
                        </td>

                        <!-- AUTO → BLOCK DIFF -->
                        <td class="diff">
                            {{ row.autoclaveToBlockDiff ? formatMinutes(row.autoclaveToBlockDiff) : '-' }}
                        </td>

                        <!-- BLOCK -->
                        <td>
                            {{ row.blockSeparatingTime ? (row.blockSeparatingTime | date:'hh:mm a') : '-' }}
                        </td>

                        <!-- BLOCK → CUBE DIFF -->
                        <td class="diff">
                            {{ row.blockToCubeDiff ? formatMinutes(row.blockToCubeDiff) : '-' }}
                        </td>

                        <!-- CUBE TEST -->
                        <td>
                            {{ row.cubeTestTime ? (row.cubeTestTime | date:'hh:mm a') : '-' }}
                        </td>

                        <!-- CUBE → REJECTION DIFF -->
                        <td class="diff">
                            {{ row.cubeToRejectionDiff ? formatMinutes(row.cubeToRejectionDiff) : '-' }}
                        </td>

                        <!-- REJECTION -->
                        <td>
                            {{ row.rejectionTime ? (row.rejectionTime | date:'hh:mm a') : '-' }}
                        </td>

                    </tr>
                </tbody>

            </table>
        </div>

        <div class="pagination">


            <button (click)="prevPage()" [disabled]="currentPage === 1">
                ⬅ Prev
            </button>

            <span>{{ currentPage }} / {{ totalPages }}</span>

            <button (click)="nextPage()" [disabled]="currentPage === totalPages">
                Next ➡
            </button>

        </div>


    </div>

</div>