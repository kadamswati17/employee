<div class="user-container">

    <div class="header-section">
        <h2 class="title">User Management</h2>

        <button class="btn-add" (click)="addUser()">+ Add User</button>
    </div>

    <div class="table-wrapper">
        <table class="excel-table" *ngIf="paginatedUsers.length > 0">
            <thead>
                <tr>
                    <th style="width: 80px;">ID</th>
                    <th style="width: 200px;">USERNAME</th>
                    <th style="width: 260px;">EMAIL</th>
                    <th style="width: 150px;">ROLE</th>
                    <th style="width: 160px;">ACTIONS</th>
                </tr>
            </thead>

            <tbody>
                <tr *ngFor="let u of paginatedUsers">
                    <td>{{ u.id }}</td>
                    <td>{{ u.username }}</td>
                    <td>{{ u.email }}</td>

                    <td>
                        <span class="role-badge" [ngClass]="u.role">{{ u.role }}</span>
                    </td>

                    <td class="actions">
                        <button class="btn btn-edit" (click)="editUser(u.id)">Edit</button>

                        <button *ngIf="u.active" class="btn btn-warning" (click)="deactivate(u.id)">
                            Deactivate
                        </button>

                        <button *ngIf="!u.active" class="btn btn-success" (click)="activate(u.id)">
                            Activate
                        </button>

                        <button class="btn btn-delete" (click)="deleteUser(u.id)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <p *ngIf="paginatedUsers.length === 0" class="no-data">No users found.</p>

        <!-- ðŸ”¹ PAGINATION -->
        <div style="margin-top:15px; text-align:center;">
            <button *ngFor="let p of [].constructor(totalPages()); let i = index" (click)="setPage(i + 1)"
                [disabled]="page === i + 1" style="margin: 0 5px; padding: 6px 12px;">
                {{ i + 1 }}
            </button>
        </div>
    </div>
</div>