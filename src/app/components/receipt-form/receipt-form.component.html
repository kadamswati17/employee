<div class="receipt-container">

    <button class="close-btn" (click)="close()">âœ–</button>

    <h2 class="title">{{ isEdit ? "Edit Receipt" : "Add Receipt" }}</h2>

    <form [formGroup]="form" (ngSubmit)="submit()">

        <div class="form-grid">

            <!-- DATE -->
            <div class="field" [class.filled]="form.get('receiptDate')?.value">
                <input type="date" formControlName="receiptDate" />
                <label>Date</label>
            </div>

            <!-- ðŸ”¥ TRANSACTION TYPE -->
            <div class="field custom-select" [class.filled]="form.get('transactionType')?.value">

                <div class="select-input" (click)="toggleTxnType()" [class.open]="txnTypeOpen">
                    {{ txnTypeLabel || ' ' }}
                </div>

                <label>Transaction Type</label>

                <div class="select-options" *ngIf="txnTypeOpen">
                    <div class="option" (click)="selectTxnType('1','Receive')">Receive</div>
                    <div class="option" (click)="selectTxnType('2','Payment')">Payment</div>
                </div>
            </div>

            <!-- ðŸ”¥ PARTY NAME -->
            <div class="field custom-select" [class.filled]="form.get('partyId')?.value">

                <div class="select-input" (click)="toggleParty()" [class.open]="partyOpen">
                    {{ partyLabel || ' ' }}
                </div>

                <label>Party Name</label>

                <div class="select-options" *ngIf="partyOpen">
                    <div class="option" *ngFor="let u of users" (click)="selectParty(u)">
                        {{ u.username }}
                    </div>
                </div>
            </div>

            <div class="grid-spacer"></div>

            <!-- AMOUNT -->
            <div class="field" [class.filled]="form.get('amount')?.value">
                <input type="number" formControlName="amount" />
                <label>Amount</label>
            </div>

            <!-- ðŸ”¥ PAYMENT MODE -->
            <div class="field custom-select" [class.filled]="form.get('paymentMode')?.value">

                <div class="select-input" (click)="togglePayment()" [class.open]="paymentOpen">
                    {{ paymentLabel || ' ' }}
                </div>

                <label>Payment Mode</label>

                <div class="select-options" *ngIf="paymentOpen">
                    <div class="option" (click)="selectPayment('0','Cash')">Cash</div>
                    <div class="option" (click)="selectPayment('1','UPI')">UPI</div>
                    <div class="option" (click)="selectPayment('2','Bank Transfer')">Bank Transfer</div>
                    <div class="option" (click)="selectPayment('3','Card')">Card</div>
                </div>
            </div>

            <!-- TXN ID -->
            <div class="field" [class.filled]="form.get('transactionId')?.value">
                <input type="text" formControlName="transactionId" />
                <label>Transaction ID</label>
            </div>

            <div class="grid-spacer"></div>

            <!-- DESCRIPTION -->
            <div class="field full" [class.filled]="form.get('description')?.value">
                <textarea formControlName="description" rows="3"></textarea>
                <label>Description</label>
            </div>

        </div>

        <button class="submit-btn" type="submit">
            {{ isEdit ? "Update" : "Save" }}
        </button>

    </form>
</div>